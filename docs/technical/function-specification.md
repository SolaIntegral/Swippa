# Visuy Cast - 機能仕様書

## 1. 機能概要

### 1.1 システム名
**Swippa**

### 1.2 機能概要
AIがユーザーの「やる気の波」や「キャパシティ」を能動的に管理し、罪悪感なく挑戦と休息を両立させる大学生向けスケジュール管理アプリ

### 1.3 主要機能
1. **スケジュール・タスク管理機能**
2. **AIによる能動的サポート機能**
3. **振り返り・モチベーション維持機能**

## 2. 機能詳細仕様

### 2.1 スケジュール・タスク管理機能

#### 2.1.1 固定予定（ブロック）の登録機能

**機能名**: 固定予定登録機能  
**機能ID**: F001  
**優先度**: 高  

**機能概要**
大学の授業やバイトなど、時間が固定された予定を直感的に登録する機能

**入力項目**
- 予定名（必須）
- 開始時間（必須）
- 終了時間（必須）
- 予定タイプ（授業/バイト/個人予定/勉強時間/休憩時間）
- 繰り返し設定（オプション）
- 説明（オプション）

**操作フロー**
1. スケジュール画面を開く
2. 週間カレンダーのグリッドを指でなぞる
3. 時間帯が選択される
4. 予定詳細入力画面が表示される
5. 必要項目を入力
6. 保存ボタンをタップ
7. 予定が登録される

**UI仕様**
- **なぞり入力**: 週間グリッドを指でなぞって時間帯を選択
- **色分け**: 予定タイプごとに色分け表示
- **マイクロインタラクション**: なぞり時にセルが明るく色変化
- **音・振動**: なぞり完了時に軽いフィードバック

**根拠・参考資料**
- リサーチ結果「なぞり入力UIの競合調査」: 操作性が高く評価されている
- ペルソナ分析: 「入力が面倒くさい」という最大のペインポイントを解決

**エラーハンドリング**
- 時間重複エラー: 既存予定と重複する場合の警告表示
- 入力不備エラー: 必須項目未入力時のエラーメッセージ
- ネットワークエラー: オフライン時のローカル保存

#### 2.1.2 タスク（To-Do）の登録機能

**機能名**: タスク登録機能  
**機能ID**: F002  
**優先度**: 高  

**機能概要**
「レポート作成」など、締切はあるが実行時間が未定のタスクを登録する機能

**入力項目**
- タスク名（必須）
- 締切日時（必須）
- 感情マトリクス（必須）
- 説明（オプション）
- 推定所要時間（オプション）

**操作フロー**
1. 任意の画面でFAB（+）ボタンをタップ
2. タスク追加画面が表示される
3. タスク名を入力
4. 締切日時を選択
5. 感情マトリクスを入力
6. 保存ボタンをタップ
7. タスクが登録される

**UI仕様**
- **FAB**: 全画面で常時表示されるフローティングアクションボタン
- **感情マトリクス**: 2軸グラフ（達成感×抵抗感）をタップまたはドラッグで選択
- **カレンダー**: 直感的な日時選択UI

**根拠・参考資料**
- ペルソナ分析: 「タスクの存在自体を忘れる」が最大のペインポイント
- リサーチ結果「感情×タスクのUI/UX事例」: 感情入力が有効とされている

**エラーハンドリング**
- 締切過去エラー: 過去の日時選択時の警告
- 感情マトリクス未入力: 必須項目の警告表示
- 重複タスク: 同名タスクの重複チェック

#### 2.1.3 感情マトリクス入力機能

**機能名**: 感情マトリクス入力機能  
**機能ID**: F003  
**優先度**: 高  

**機能概要**
タスクに対する「達成感（やりたい）」と「抵抗感（やりたくない）」を2軸グラフで入力する機能

**入力項目**
- 達成感（0-100）
- 抵抗感（0-100）
- エネルギー（0-100）
- 自信（0-100）

**操作フロー**
1. 感情マトリクス入力画面を開く
2. 2軸グラフ上でタップまたはドラッグ
3. 値がリアルタイムで更新される
4. 確認ボタンをタップ
5. 感情データが保存される

**UI仕様**
- **2軸グラフ**: 達成感（縦軸）×抵抗感（横軸）
- **インタラクティブ**: タップまたはドラッグで値選択
- **リアルタイム更新**: 選択と同時に値が更新
- **色分け**: 感情の強さに応じた色変化

**根拠・参考資料**
- リサーチ結果「感情×タスクのUI/UX事例」: 感情入力による温かいフィードバックが有効
- コンセプト: 「感情的（達成感×抵抗感）」な側面を考慮した管理

**エラーハンドリング**
- 値範囲エラー: 0-100の範囲外値の制限
- 入力不備: 必須項目未入力の警告

### 2.2 AIによる能動的サポート機能

#### 2.2.1 モード管理（ON/OFF）機能

**機能名**: モード管理機能  
**機能ID**: F004  
**優先度**: 高  

**機能概要**
ユーザーの状態を「ON（集中）」と「OFF（公認サボり）」の2モードで管理する機能

**機能詳細**
- **OFFモード（デフォルト）**: 公認サボり時間、罪悪感のない休息
- **ONモード**: 集中時間、タスク実行に集中
- **自動切替**: AIがユーザーの状態を判断して自動切替

**操作フロー**
1. アプリ起動時はOFFモード（デフォルト）
2. 「ONモードにする」ボタンをタップ
3. ONモードに切り替わる
4. 一定時間タスクに着手しないと自動でOFFモードに戻る

**UI仕様**
- **モード表示**: 現在のモードを視覚的に表示
- **切替ボタン**: 直感的なモード切替ボタン
- **背景色**: モードに応じた背景色（暖色/寒色）
- **キャラクター**: モードに応じたキャラクターの表情変化

**根拠・参考資料**
- リサーチ結果「戦略的休息の効果」: 90分作業＋15分休憩で生産性17%向上
- コンセプト: 「公認サボり＆集中プランナー」機能

**エラーハンドリング**
- モード切替失敗: ネットワークエラー時のローカル状態保持
- 自動切替エラー: AI推論失敗時のフォールバック

#### 2.2.2 AIタスク提案（スワイプUI）機能

**機能名**: AIタスク提案機能  
**機能ID**: F005  
**優先度**: 高  

**機能概要**
ONモード時、AIがユーザーの「感情マトリクス」と「残キャパシティ」に基づき、今やるべきタスクを1つだけ提案する機能

**機能詳細**
- **AI推論**: 感情マトリクス、キャパシティ、時間帯を考慮
- **1タスク表示**: 一度に1つのタスクのみ表示
- **スワイプ操作**: 右スワイプ（今やる）、左スワイプ（AIに任せる）

**操作フロー**
1. ONモードでメイン画面を開く
2. AIが最適なタスクを1つ提案
3. タスクカードをスワイプ
4. 右スワイプ: タスク実行開始
5. 左スワイプ: AIにリスケ依頼

**UI仕様**
- **タスクカード**: 1つのタスクをカード形式で表示
- **スワイプエリア**: 左右スワイプで操作
- **スワイプ指示**: 「今やる！」「AIに任せる」の表示
- **アニメーション**: スワイプ時の滑らかなアニメーション

**根拠・参考資料**
- リサーチ結果「スワイプUIの適用事例」: 操作性が高く評価されている
- ペルソナ分析: 直感的な操作で「面倒くささ」を排除

**エラーハンドリング**
- AI推論エラー: フォールバックタスクの表示
- スワイプ認識エラー: タップ操作での代替

#### 2.2.3 AI自動リスケジュール機能

**機能名**: AI自動リスケジュール機能  
**機能ID**: F006  
**優先度**: 高  

**機能概要**
提案されたタスクを「今やりたくない」場合、AIが自動で最適な時間に再配置する機能

**機能詳細**
- **自動再配置**: AIが最適な時間帯を計算
- **罪悪感排除**: 「先延ばし」を「リスケ依頼」に変換
- **スケジュール調整**: 既存予定との調整

**操作フロー**
1. タスクカードを左スワイプ
2. 「AIに任せる」を選択
3. AIが最適な時間を計算
4. スケジュールに自動配置
5. ユーザーに通知

**UI仕様**
- **リスケ確認**: 再配置先の時間帯を表示
- **理由説明**: AIの判断理由を表示
- **承認ボタン**: ユーザーの承認を求める

**根拠・参考資料**
- リサーチ結果「スワイプUIの適用事例」: 「後回し」の罪悪感を「リスケ依頼」に変換
- ペルソナ分析: 罪悪感の排除が重要

**エラーハンドリング**
- リスケ失敗: 手動での時間選択
- スケジュール衝突: 代替時間の提案

#### 2.2.4 自動フォールバック機能

**機能名**: 自動フォールバック機能  
**機能ID**: F007  
**優先度**: 中  

**機能概要**
ONモード中に一定時間タスクに着手しない場合、自動でOFFモード（公認サボり）に切り替える機能

**機能詳細**
- **放置検知**: タスク着手の有無を監視
- **自動切替**: 一定時間経過でOFFモードに切替
- **罪悪感軽減**: 「サボってしまった」を「AIが判断した」に変換

**操作フロー**
1. ONモードでタスクを放置
2. 一定時間（例：5分）経過
3. AIが「休憩が必要」と判断
4. 自動でOFFモードに切替
5. ユーザーに通知

**UI仕様**
- **カウントダウン**: 放置時間の表示
- **警告表示**: 切替前の警告
- **切替アニメーション**: スムーズなモード切替

**根拠・参考資料**
- ペルソナ分析: 罪悪感の軽減が重要
- コンセプト: AIによる能動的なサポート

**エラーハンドリング**
- 検知エラー: 手動でのモード切替
- 通知エラー: 画面表示での通知

### 2.3 振り返り・モチベーション維持機能

#### 2.3.1 ポジティブ・ダッシュボード機能

**機能名**: ポジティブ・ダッシュボード機能  
**機能ID**: F008  
**優先度**: 高  

**機能概要**
行動データを「失敗」としてではなく、客観的な「タイプ」や「質的成長」としてポジティブに可視化する機能

**機能詳細**
- **行動タイプ診断**: 「夜型スロースターター」などの客観的分析
- **質的成長指標**: 抵抗感の高いタスクの突破回数など
- **感情分析**: やる気の波の可視化

**表示項目**
- **あなたのタイプ**: 行動パターンの客観的分析
- **今週の成果**: 質的な成長指標
- **やる気の波**: 感情と行動の相関グラフ

**UI仕様**
- **カード形式**: 各指標をカードで表示
- **グラフ表示**: 感情分析の可視化
- **ポジティブ表現**: ネガティブな表現を避ける

**根拠・参考資料**
- リサーチ結果「行動パターンダッシュボードの事例」: ポジティブな可視化が有効
- ペルソナ分析: 自己嫌悪の回避が重要

**エラーハンドリング**
- データ不足: 十分なデータがない場合のメッセージ
- 分析エラー: デフォルト表示での対応

#### 2.3.2 共感者キャラクター機能

**機能名**: 共感者キャラクター機能  
**機能ID**: F009  
**優先度**: 中  

**機能概要**
ONモード（応援）とOFFモード（一緒に休む）で様子が変わり、ユーザーの感情に寄り添うキャラクター機能

**機能詳細**
- **モード連動**: 現在のモードに応じた表情変化
- **共感的メッセージ**: ユーザーの状態に寄り添うメッセージ
- **励まし・慰め**: 状況に応じた適切なサポート

**表示内容**
- **ONモード**: やる気を出している、応援している様子
- **OFFモード**: 一緒に休んでいる、だらけている様子
- **メッセージ**: 状況に応じた共感的なコメント

**UI仕様**
- **アニメーション**: 表情や動作のアニメーション
- **メッセージ表示**: 吹き出しでのコメント表示
- **インタラクション**: タップでの会話

**根拠・参考資料**
- リサーチ結果「ゲーミフィケーションとペルソナ適性」: 過度なプレッシャーは逆効果
- コンセプト: 「共感者」としてのキャラクター設計

**エラーハンドリング**
- アニメーションエラー: 静止画での表示
- メッセージエラー: デフォルトメッセージの表示

## 3. 機能間連携

### 3.1 機能連携図
```
オンボーディング → スケジュール登録 → タスク登録 → AI推論 → モード管理 → ダッシュボード
     ↓              ↓              ↓         ↓         ↓
  初期設定        固定予定        感情入力   タスク提案  振り返り
```

### 3.2 データフロー
1. **データ入力**: ユーザーがスケジュール・タスク・感情を入力
2. **AI推論**: 入力データを基にAIがキャパシティ・提案を計算
3. **モード管理**: AI推論結果に基づきモードを切替
4. **タスク実行**: ユーザーがタスクを実行
5. **データ蓄積**: 実行結果をデータベースに蓄積
6. **分析・可視化**: 蓄積データを分析してダッシュボードに表示

## 4. 非機能要件

### 4.1 パフォーマンス要件
- **初期読み込み**: < 2秒
- **ページ遷移**: < 1秒
- **API応答**: < 500ms
- **オフライン対応**: 基本機能のオフライン利用可能

### 4.2 可用性要件
- **稼働率**: 99.9%以上
- **エラー率**: < 1%
- **復旧時間**: < 30分

### 4.3 セキュリティ要件
- **認証**: Firebase Authentication
- **認可**: Firestore Security Rules
- **暗号化**: 機密データの暗号化
- **プライバシー**: GDPR準拠

### 4.4 アクセシビリティ要件
- **カラーコントラスト**: 4.5:1以上
- **キーボード操作**: 全機能のキーボード操作対応
- **スクリーンリーダー**: 音声読み上げ対応
- **フォントサイズ**: 拡大縮小対応

## 5. 制約事項

### 5.1 技術的制約
- **Firebase制限**: Firestoreの読み書き制限内での開発
- **ブラウザ対応**: IE11以降のブラウザ対応
- **モバイル性能**: 低スペック端末での動作保証

### 5.2 ビジネス制約
- **開発期間**: 限られた開発期間内での実装
- **予算**: Firebaseの無料枠内での運用
- **リソース**: 限られた開発リソース

## 6. 参考資料・根拠

### 6.1 リサーチ結果
- **戦略的休息の効果**: 90分作業＋15分休憩で生産性17%向上
- **感情×タスクのUI/UX事例**: 感情入力による温かいフィードバックが有効
- **ゲーミフィケーションとペルソナ適性**: 過度なプレッシャーは逆効果
- **スワイプUIの適用事例**: 直感的な操作性が高く評価
- **行動パターンダッシュボードの事例**: ポジティブな可視化が有効
- **なぞり入力UIの競合調査**: 操作性が高く評価されている

### 6.2 ペルソナ分析
- **PERSONA_ANALYSIS.md**: 張杉 翔くんの詳細な特性分析
- **CONCEPT.md**: プロジェクトのコアコンセプト定義

### 6.3 技術選定根拠
- **TypeScript**: 型安全性による開発効率と品質向上
- **Firebase**: スケーラブルなバックエンドサービス
- **PWA**: オフライン対応、ネイティブアプリライクな体験

---

**作成日**: 2024年12月  
**最終更新**: 2024年12月  
**バージョン**: 1.0
